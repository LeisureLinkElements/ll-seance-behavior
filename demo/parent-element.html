<link rel="import" href="../../polymer/polymer.html">
<link rel="import" href="../../paper-button/paper-button.html">
<link rel="import" href="../ll-seance-behavior.html">
<link rel="import" href="child-element.html">

<dom-module id="parent-element">

  <style>

    child-element {
      margin: 0 auto;
      display: block;
      border: 10px solid darkturquoise;
      background-color: white;
      padding: 10px;
    }
    code {
      font-size: 16px;
      color: blue;
    }

    .demo-button {
      margin-top:20px;
      float:left;
    }

    .demo-func {
      float:right;
    }

    .status {
      font-size:20px;
    }

    .child-label {
      display: block;
      margin: 30px 0 0 0;
    }

    paper-button {
      margin: 0 20px 0 0;
      text-transform:none;
    }

    paper-button.colorful {
      color: #4285f4;
    }

    paper-button[raised].colorful {
      background: #4285f4;
      color: #fff;
    }

    paper-button[toggles] {
      transition: all 0.3s;
    }

    paper-button[toggles][active] {
      background-color: rgba(0, 0, 0, 0.25);
    }

    paper-button[toggles][active].colorful {
      background-color: rgba(66, 133, 244, 0.25);
    }

    paper-button[toggles][active][raised].colorful {
      background-color: rgba(66, 133, 244, 0.75);
    }

    paper-button.hover:hover {
      background: #eee;
    }

    paper-button.ripple {
      --paper-button-ink-color: var(--paper-pink-a200);
    }

  </style>

  <template id="theParent">

    <p>There is a conditional template at the bottom of this element that is shown when this element's <em>reveal</em> property is set to true true. Click these two buttons to see that happen:</p>

    <paper-button class="colorful" raised on-click="justShow">set this.reveal = true</paper-button>

    <paper-button class="colorful" raised on-click="justHide">set this.reveal = false</paper-button>

    <span class="status">this.reveal = <span>[[reveal]]</span></span>

    <p>That conditional template contains a child-element (id = "theChild") with a myProgress property set to zero by default.</p>

    <p>The child-element contains a progress bar whose value is bound to the myProgress property.</p>

    <paper-button class="colorful demo-button" raised on-click="demoTheBehavior">call demoTheBehavior()</paper-button>

    <code class="demo-func"><pre>
      demoTheBehavior: function () {
        this.seanceBegin('theChild', 'attached', {myProgress: 50});
        this.reveal = true;
      }
    </pre></code>

    <div style="clear:both"></div>

    <template is="dom-if" if="[[reveal]]" restamp="true">
      <code class="child-label">child-element:</code>
      <child-element id="theChild" fire-log fire-log-name="#theChild"></child-element>
    </template>

  </template>

</dom-module>

<script>

  Polymer({

    is: 'parent-element',

    behaviors: [LeisureLinkBehaviors.SeanceBehavior],

    listeners: {
      'associated-units-table-selected-items-changed': '_associatedUnitsSelectionChanged',
      'unassociated-units-table-selected-items-changed': '_unassociatedUnitsSelectionChanged',
      'iron-form-submit': '_searchUnassociatedUnits'
    },

    properties: {

      reveal: {
        type: Boolean,
        value: false
      },

      childStatusMessage: 'hidden'

    },

    justShow: function () {
      this.reveal = true;
    },

    justHide: function () {
      this.reveal = false;
    },

    demoTheBehavior: function () {
      this.seanceBegin('theChild', 'attached', {myProgress: 50});
      this.reveal = true;
    }

  });

</script>